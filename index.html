<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Un petit mot pour toi ğŸ’Œ</title>
    <style>
      body {
        background: linear-gradient(to bottom right, #fff8f2, #fde6f4);
        font-family: "Segoe UI", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2em;
        min-height: 100vh;
        color: #444;
      }

      #box {
        max-width: 700px;
        font-size: 1.2rem;
        line-height: 1.7;
        border-radius: 20px;
        background: white;
        padding: 2em;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border: 2px solid #c1a872;
        text-align: center;
        position: relative;
      }

      .input-block {
        margin-top: 1.5em;
      }

      input,
      textarea {
        padding: 0.5em 1em;
        font-size: 1rem;
        border: 2px solid #c1a872;
        border-radius: 12px;
        outline: none;
        width: 90%;
        max-width: 500px;
        margin-bottom: 1em;
        resize: none;
      }

      button {
        padding: 0.6em 1.5em;
        font-size: 1rem;
        background: #c1a872;
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        transition: background 0.3s;
      }

      button:hover {
        background: #b08c5c;
      }

      .floating-heart {
        position: absolute;
        bottom: 10px;
        right: 10px;
        font-size: 2rem;
        animation: float 3s infinite ease-in-out;
        opacity: 0.8;
      }

      @keyframes float {
        0% {
          transform: translateY(0);
          opacity: 0.8;
        }
        50% {
          transform: translateY(-15px);
          opacity: 1;
        }
        100% {
          transform: translateY(0);
          opacity: 0.8;
        }
      }

      footer {
        margin-top: 2em;
        font-size: 0.85rem;
        color: #999;
        text-align: center;
      }

      .response-block {
        margin-top: 2em;
      }
    </style>
  </head>
  <body>
    <div id="box">
      <div id="message"></div>

      <div class="input-block" id="nameInputBlock" style="display: none">
        <p>Tu veux entrer ton prenom? ğŸ˜Š</p>
        <input type="text" id="name" placeholder="Ton prÃ©nom..." />
        <br />
        <button onclick="handleName()">Valider</button>
      </div>

      <div class="response-block" id="responseBlock" style="display: none">
        <p>Tu veux me rÃ©pondre ? ğŸ’¬</p>
        <form
          action="https://formsubmit.co/sergiomuzito@gmail.com"
          method="POST"
        >
          <input
            type="hidden"
            name="_subject"
            value="RÃ©ponse Ã  ton mot doux ğŸ’–"
          />
          <input type="hidden" name="_captcha" value="false" />
          <textarea
            name="message"
            rows="4"
            placeholder="Tu peux me repondre ici..."
            required
          ></textarea>
          <br />
          <button type="submit">Envoyer âœ¨</button>
        </form>
      </div>

      <div class="floating-heart">ğŸ’—</div>
    </div>

    <footer>Fait avec amour & JavaScript ğŸ§¸âœ¨</footer>

    <script>
      const hearts = ["â¤ï¸", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ§¡"];
      const messageEl = document.getElementById("message");
      const inputBlock = document.getElementById("nameInputBlock");
      const responseBlock = document.getElementById("responseBlock");

      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      async function typeText(text, delay = 40) {
        for (let char of text) {
          messageEl.innerHTML += char;
          await sleep(delay);
        }
        messageEl.innerHTML += "<br/>";
        await sleep(400);
      }

      async function startMessage() {
        await typeText("Coucou, toi ğŸ‘‹");
        await typeText("Tu vas bien j'espÃ¨re");
        await typeText("Longue journÃ©e?");
        await typeText("Jâ€™avais juste envie de te dire quelque chose...");
        await typeText("Mais d'abord, rÃ©ponds-moi :");
        inputBlock.style.display = "block";
      }

      async function handleName() {
        const name = document.getElementById("name").value.trim();
        if (!name) return;

        // Ajouter un champ cachÃ© avec le prÃ©nom dans le formulaire
        const form = document.querySelector("form");
        const hiddenNameInput = document.createElement("input");
        hiddenNameInput.type = "hidden";
        hiddenNameInput.name = "prenom";
        hiddenNameInput.value = name;
        form.appendChild(hiddenNameInput);

        inputBlock.style.display = "none";
        messageEl.innerHTML = "";

        await typeText(
          `Oh ${name}... joli prÃ©nom ğŸ¥° Mais tâ€™Ã©tais pas censÃ© tâ€™appeler Si Saint ? ğŸ˜„`
        );
        await typeText("Devine quoi...");
        await sleep(1500);
        await typeText("...");
        await sleep(800);
        await typeText("Tu comptes beaucoup pour moi. Vraiment. ğŸ’–");
        await sleep(1000);
        await typeText(
          `${randomHeart()} ${name}, tâ€™es quelquâ€™un de spÃ©cial. ${randomHeart()}`
        );
        await typeText("Je voulais que tu le saches.");
        await sleep(800);
        await typeText("Et cette fois j'ai pas oubliÃ© ton anniversaire. ğŸ¤­");
        await sleep(200);
        await typeText(
          "Je sais, le souhait arrive en retard, je devrais faire ce truc un peu original, tu vois ğŸ˜"
        );
        await sleep(1000);
        await typeText(
          "Merci pour ta vie, ta prÃ©sence dans la mienne, et tout ce qu'on a vecu."
        );
        await sleep(800);
        await typeText("Je te souhaite tout le meilleur dans le futur.");
        await sleep(1000);
        await typeText("Joyeux anniversaire petite ğŸ’«");

        responseBlock.style.display = "block";
      }

      function randomHeart() {
        return hearts[Math.floor(Math.random() * hearts.length)];
      }

      startMessage();
    </script>
  </body>
</html>
